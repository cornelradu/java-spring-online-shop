<html xmlns:th="http://www.thymeleaf.org">

<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <style>
        .product {
            cursor: pointer;
        }

        .product {
            cursor: pointer;
        }


        .hide_on_mobile {
            display: block; /* explicitly set display for larger screens */
        }

        #large_screen_nav{
            display: block;
        }

        #small_screen_nav{
            display: none;
        }

        #content{
            margin-top:190px
        }

        #two_per_row{
            display: none;
        }

        #three_per_row{
            display: block;
        }

        @media screen and (max-width: 996px) {
            .hide_on_mobile {
                display: none;
            }

            #small_screen_nav{
                display: block;
            }

            #large_screen_nav{
                display: none;
            }

            .navbarDropdown{

            }

            #content{
                margin-top:190px
            };

            #two_per_row{
                display: block;
            }

            #three_per_row{
                display: none;
            }

            #two_per_row{
                display: block;
            }

            #three_per_row{
                display: none;
            }

        }
    </style>

</head>
<body>

<div th:replace="~{header :: header}">...</div>

<div id="content" class="d-flex align-items-center justify-content-center w-100" >
    <div class="container" style="width: 1024px;margin-left: auto;margin-right: auto">

        <div class="row">
            <!-- Column with col-3 -->
            <div class="col-8 bg-light" style="border-right-width: 2px; border-right-style: solid; justify-content: center;align-items: center">
                <img th:src="'/images_spring/' + ${product.image}" class="img-fluid" alt="Item 1" style="width: 500px;height: 800px">

            </div>
            <div class="col-4 bg-light">
                <p th:text="${product.name}"></p>
                <p th:text="${product.getListOfAuthors()}"></p>

                <p th:text="${product.description}"></p>

                <p> Vandut si livrat de: <b>Elefant</b></p>
                <p> Cost livrare: va fi calculat in pagina de comanda</p>

                <br/>

                Editura: <p th:text="${product.publishingHouse.name}"></p>

                <br/>

                <h2 th:text="${product.price}" style="color:orange"></h2>

                <button class="btn btn-success" id="AddToCartButton"  th:data-product-id="${product.id}" style="width: 100%">Adauga in cos</button>
            </div>
    </div>
</div>
<script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>

    <script>
        $("#AddToCartButton").click(function () {
            product_id = $(this).attr("data-product-id")
            console.log(product_id)
            $.ajax({
                url: '/addToCart/' + product_id,
                method: 'GET',
                dataType: 'text'
            })
                .done(function(response) {
                    console.log('Data received:', response);

                    $.ajax({
                        url: '/cartCount',
                        method: 'GET',
                        dataType: 'text'
                    })
                        .done(function(response) {
                            console.log('Data received:', response);
                            $("#cartSize").text(response)
                        })
                        .fail(function(xhr, status, error) {
                            console.error('Error:', error);
                        })
                        .always(function() {
                            console.log('Request completed');
                        });

                })
                .fail(function(xhr, status, error) {
                    console.error('Error:', error);
                })
                .always(function() {
                    console.log('Request completed');
                });
        })
    </script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>
</html>
